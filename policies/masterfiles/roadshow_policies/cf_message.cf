bundle agent cf_message {

vars:

  "host_info"     data => parsejson('
      { "host": { "uqhost": "$(sys.uqhost)", "domain": "$(sys.domain)", "role": "$(classify.role)" } }');

  "host_store"      string => storejson(host_info);

commands:

  "/var/cfengine/bin/cf-message.py ${host_store}"
            contain => python_connect_timeout;

reports:

  "${this.bundle} host_store: ${host_store}";

}

body contain python_connect_timeout {

exec_timeout => "30";

}
