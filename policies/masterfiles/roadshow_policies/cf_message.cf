bundle agent cf_message {

vars:

  "host_info"     data => parsejson('
      { "host": { "uqhost": "$(sys.uqhost)", "domain": "$(sys.domain)", "role": "$(classify.role)" } }');

  "host_store"      string => storejson(host_info);

commands:

  "/var/cfengine/bin/cf-message.py ${host_store}"
            args => "--exec_timeout = 1";

reports:

  "${this.bundle} host_store: ${host_store}";

}
